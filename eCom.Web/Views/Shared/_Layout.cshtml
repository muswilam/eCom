<!DOCTYPE html>
<html>
<head>
    <!-- Basic Page Needs -->
    <meta charset="utf-8">
    <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
    <title>@ViewBag.Title Bila.Q</title>

    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Bootstrap  -->
    <link rel="stylesheet" type="text/css" href="~/Content/stylesheets/bootstrap.css">

    <!-- Theme Style -->
    <link rel="stylesheet" type="text/css" href="~/Content/stylesheets/style.css">
    <link rel="stylesheet" type="text/css" href="~/Content/stylesheets/responsive.css">

    <!-- Colors -->
    <link rel="stylesheet" type="text/css" href="~/Content/stylesheets/colors/color1.css" id="colors">

    <!-- Animation Style -->
    <link rel="stylesheet" type="text/css" href="~/Content/stylesheets/animate.css">

    <!-- Favicon and touch icons  -->
    <link href="~/Content/icon/icon.png" rel="shortcut icon">

    <!--[if lt IE 9]>
        <script src="javascript/html5shiv.js"></script>
        <script src="javascript/respond.min.js"></script>
    <![endif]-->

    <script src="~/Content/javascript/jquery.min.js"></script>

    <script src="~/Content/javascript/jquery-ui.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.11/jquery.validate.unobtrusive.min.js"></script>

</head>
<body class="header_sticky header-style-1 has-menu-extra">
    <!-- Preloader -->
    <div id="loading-overlay">
        <div class="loader"></div>
    </div>

    <div class="boxed">
        <div id="site-header-wrap">
            <!-- Header -->
            <header id="header" class="header clearfix">
                <div class="container-fluid clearfix container-width-93 p-2" id="site-header-inner">
                    <div id="logo" class="logo float-left ">
                        <a href="@Url.Action("Index","Home")" title="logo">
                            <img src="~/Content/images/Bila.Q.png" alt="image" width="107" height="24" data-retina="/Content/images/logo@2x.png" data-width="107" data-height="24">
                        </a>
                    </div><!-- /.logo -->
                    <div class="mobile-button"><span></span></div>
                    <ul class="menu-extra">
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                        {
                            <li class="box-login nav-top-cart-wrapper">
                                <a class="icon_login active" href="#"></a>
                                <div class="nav-shop-cart">
                                    <div class="widget_shopping_cart_content">
                                        <div class="woocommerce-min-cart-wrap">
                                            <ul class="woocommerce-mini-cart cart_list product_list_widget ">
                                                <li class="woocommerce-mini-cart-item mini_cart_item">
                                                    <span>@User.Identity.Name</span>
                                                </li>
                                                <li class="woocommerce-mini-cart-item mini_cart_item">
                                                    <a href="javascript:document.getElementById('logoutForm').submit()">
                                                        Logout
                                                    </a>
                                                </li>
                                            </ul>
                                        </div><!-- /.widget_shopping_cart_content -->
                                    </div>
                                </div><!-- /.nav-shop-cart -->
                            </li>
                        }
                        else if (User.Identity.IsAuthenticated)
                        {
                            <li class="box-login nav-top-cart-wrapper">
                                <a class="icon_login active" href="#"></a>
                                <div class="nav-shop-cart">
                                    <div class="widget_shopping_cart_content">
                                        <div class="woocommerce-min-cart-wrap">
                                            <ul class="woocommerce-mini-cart cart_list product_list_widget ">
                                                <li class="woocommerce-mini-cart-item mini_cart_item">
                                                    <span> @User.Identity.Name</span>
                                                </li>
                                                <li class="woocommerce-mini-cart-item mini_cart_item">
                                                    <a href="javascript:document.getElementById('logoutForm').submit()">
                                                        Logout
                                                    </a>
                                                </li>
                                            </ul>
                                        </div><!-- /.widget_shopping_cart_content -->
                                    </div>
                                </div><!-- /.nav-shop-cart -->
                            </li>
                            
                            <li class="box-cart nav-top-cart-wrapper">
                                <a class="icon_cart nav-cart-trigger active" href="@Url.Action("Checkout","Shop")"><span id="cartProductsCount"></span></a>
                            </li>
                        }

                        

                    </ul><!-- /.menu-extra -->
                    <div class="nav-wrap">
                        <nav id="mainnav" class="mainnav">
                            <ul class="menu">
                                <li class="menu-item" data-path="@Href("~/Home/Index")">
                                    <a href="@Href("~/Home/Index")"><i class="fa fa-home"></i> Home</a>
                                </li>
                                <li class="menu-item" data-path="@Href("~/Shop/Index")">
                                    <a href="@Href("~/Shop/Index")"><i class="fa fa-shopping-cart"></i> Shop</a>
                                </li>

                                @if (User.IsInRole("Admin"))
                                {
                                    <li>
                                        <a href="#" onclick="return false;"><i class="fa fa-list"></i> Dashboard</a>
                                        <ul class="submenu">
                                            <li>
                                                <a href="@Url.Action("Index","Category")"><i class="fa fa-list-alt"></i> Categories</a>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("Index", "Product")"><i class="fa fa-product-hunt"></i> Products</a>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("Index", "Order")"><i class="fa fa-list-ul"></i> Orders</a>
                                            </li>
                                        </ul>
                                    </li>

                                }
                                else
                                {
                                    <li class="menu-item" data-path="@Href("~/Shop/Checkout")">
                                        <a href="@Href("~/Shop/Checkout")"><i class="fa fa-shopping-bag"></i> Cart</a>
                                    </li>
                                    <li class="menu-item" data-path="@Href("~/Wishlist/Index")">
                                        <a href="@Href("~/Wishlist/Index")"><i class="fa fa-heart"></i> Wishlist</a>
                                    </li>
                                    <li class="menu-item" data-path="@Href("~/Shop/OrderPlaced")">
                                        <a href="@Href("~/Shop/OrderPlaced")"><i class="fa fa-list-ul"></i> Orders</a>
                                    </li>
                                }
                            

                                @if (!User.Identity.IsAuthenticated)
                                {
                                    <li>
                                        <a href="@Url.Action("Register","Account")"><i class="fa fa-user-plus"></i>  Sign up</a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Login","Account")"><i class="fa fa-sign-in"></i> Log in</a>
                                    </li>
                                }
                            </ul>

                        </nav><!-- /.mainnav -->
                    </div><!-- /.nav-wrap -->
                </div><!-- /.container-fluid -->
            </header><!-- /header -->
        </div><!-- /.site-header-wrap -->
        @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
        {
            @Html.AntiForgeryToken()
        }

        @RenderBody()

        <section class="flat-row mail-chimp">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <div class="text">
                            <h5>Follow us in social media, Keep in touch.</h5>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="subscribe clearfix">
                            <ul class="flat-social">
                                <li><a href="@ConfigurationService.Instance.GetConfig("TwitterUrl").Value"><i class="fa fa-twitter"></i></a></li>
                                <li><a href="@ConfigurationService.Instance.GetConfig("LinkedinUrl").Value"><i class="fa fa-linkedin"></i></a></li>
                                <li><a href="@ConfigurationService.Instance.GetConfig("GithubUrl").Value"><i class="fa fa-github"></i></a></li>
                            </ul><!-- /.flat-social -->
                        </div><!-- /.subscribe -->
                    </div>
                </div>
            </div>
        </section><!-- /.mail-chimp -->
        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-md-4">
                        <div class="widget widget-link">
                            <ul>
                                <li><a href="@Url.Action("About","Home")">About Us</a></li>
                                <li><a href="@Url.Action("Contact","Home")">Contact Us</a></li>
                                <li><a href="@Url.Action("FAQ","Home")">FAQs</a></li>

                            </ul>
                        </div><!-- /.widget -->
                    </div><!-- /.col-md-3 -->
                    <div class="col-sm-6 col-md-4">
                        <div class="widget widget-link link-login">
                            <ul>
                                <li><a href="@Url.Action("Login", "Account")">Log in / Sign up</a></li>
                                <li><a href="@Url.Action("Index","Wishlist")">Wishlist items</a></li>
                                <li><a href="@Url.Action("Checkout", "Shop")">Your cart</a></li>
                            </ul>
                        </div><!-- /.widget -->
                    </div><!-- /.col-md-3 -->
                    <div class="col-sm-6 col-md-4">
                        <div class="widget widget-brand">
                            <div class="logo logo-footer">
                                <a href="@Url.Action("Index","Home")"><img src="~/Content/images/Bila.Q.png" alt="image" width="107" height="24"></a>
                            </div>
                            <ul class="flat-contact">
                                <li class="address">@ConfigurationService.Instance.GetConfig("CompanyAddress").Value</li>
                                <li class="phone">@ConfigurationService.Instance.GetConfig("CompanyPhone").Value</li>
                                <li class="email">@ConfigurationService.Instance.GetConfig("GoogleMail").Value</li>
                            </ul><!-- /.flat-contact -->
                        </div><!-- /.widget -->
                    </div><!-- /.col-md-3 -->
                </div><!-- /.row -->
            </div><!-- /.container -->
        </footer><!-- /.footer -->

        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <p class="copyright text-center">Copyright @@ @DateTime.Now.Year <a href="@ConfigurationService.Instance.GetConfig("TwitterUrl").Value">Sully</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Go Top -->
        <a class="go-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

    <!-- Javascript -->
    <script src="~/Content/javascript/tether.min.js"></script>
    <script src="~/Content/javascript/bootstrap.min.js"></script>
    <script src="~/Content/javascript/jquery.easing.js"></script>
    <script src="~/Content/javascript/parallax.js"></script>
    <script src="~/Content/javascript/jquery-waypoints.js"></script>
    <script src="~/Content/javascript/jquery-countTo.js"></script>
    <script src="~/Content/javascript/jquery.countdown.js"></script>
    <script src="~/Content/javascript/jquery.flexslider-min.js"></script>
    <script src="~/Content/javascript/images-loaded.js"></script>
    <script src="~/Content/javascript/jquery.isotope.min.js"></script>
    <script src="~/Content/javascript/magnific.popup.min.js"></script>
    <script src="~/Content/javascript/jquery.hoverdir.js"></script>
    <script src="~/Content/javascript/owl.carousel.min.js"></script>
    <script src="~/Content/javascript/equalize.min.js"></script>
    <script src="~/Content/javascript/gmap3.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIEU6OT3xqCksCetQeNLIPps6-AYrhq-s&region=GB"></script>

    <script src="~/Content/javascript/jquery.cookie.js"></script>
    <script src="~/Content/javascript/main.js"></script>

    <!-- Revolution Slider -->
    <script src="~/Content/rev-slider/js/jquery.themepunch.tools.min.js"></script>
    <script src="~/Content/rev-slider/js/jquery.themepunch.revolution.min.js"></script>
    <script src="~/Content/javascript/rev-slider.js"></script>
    <!-- Load Extensions only on Local File Systems ! The following part can be removed on Server for On Demand Loading -->
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.actions.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.carousel.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.kenburn.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.migration.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.navigation.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.parallax.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script src="~/Content/rev-slider/js/extensions/revolution.extension.video.min.js"></script>

    <!-- Sweet alert for better alert conirm -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</body>
</html>

@using Microsoft.AspNet.Identity.Owin;

@{

    var userManager = HttpContext.Current.GetOwinContext().GetUserManager<ApplicationUserManager>();
    var user = userManager.Users.Where(u => u.Email == User.Identity.Name).FirstOrDefault();
    var userName = user != null ? user.Name : string.Empty;
}

<script>
    function focusElement(elementToFocus) {
        $('html, body').animate({
            scrollTop: $("#" + elementToFocus).offset().top - 100
        }, 700);
    }

 

    function updateCartProducts(existingCookieData) {
        var cartProducts;

        if (existingCookieData != undefined && existingCookieData != "" && existingCookieData != null) //undefined: first time
        {
            cartProducts = existingCookieData.split('-'); //split('-'): every item in index of string , split(): all items in one index of string
        } else {
            cartProducts = []; //initialize
        }

        if (cartProducts.length == 0) {
            $("#cartProductsCount").html(0);
        } else {
            $("#cartProductsCount").html(cartProducts.length - 1);
        }

    };

    $(document).ready(function () {
        updateCartProducts($.cookie('@userName.Replace(" ","")' + 'CartProducts'));

        var location = window.location.pathname;

        // add active class to li that matches location
        $('.menu li').each(function (index, element) {
            var link = $(element).attr("data-path");
            if (link == location) {
                $(element).addClass("active");
            }
        });
    
    })
</script>